# Relation Types 정의
# 이 파일만 수정하면 코드 변경 없이 관계 타입 추가/수정 가능
# v2.0: lag, decay, regime_applicability 메타데이터 추가

# =============================================================================
# 메타데이터 기본값 정의
# =============================================================================
defaults:
  lag_days: [0, 30, 90]           # 지연 효과 후보 (일)
  decay_halflife_days: 90         # 신뢰도 반감기 (일)
  regime_applicability:           # 레짐별 적용 강도 (기본값)
    risk_on: 1.0
    risk_off: 1.0
    inflation_up: 1.0
    disinflation: 1.0
    growth_up: 1.0
    growth_down: 1.0
    liquidity_abundant: 1.0
    liquidity_tight: 1.0

# =============================================================================
# 관계 타입 정의
# =============================================================================
relation_types:
  # -------------------------------------------------------------------------
  # 1. 영향 관계 (Affect)
  # -------------------------------------------------------------------------
  Affect:
    description: "A가 B에 영향을 미침"
    has_polarity: true  # +/-/neutral 가능
    examples:
      - "금리 인상이 성장주에 부정적 영향"
      - "달러 강세가 원자재에 하락 압력"
    patterns:
      - "{head}이/가 {tail}에 영향"
      - "{head} 상승 시 {tail} 하락"
    meta:
      lag_days: [0, 30, 90]
      decay_halflife_days: 60
      regime_applicability:
        risk_on: 1.0
        risk_off: 0.8
        inflation_up: 0.9
        disinflation: 0.9
        growth_up: 1.0
        growth_down: 0.8
        liquidity_abundant: 1.0
        liquidity_tight: 0.8

  # -------------------------------------------------------------------------
  # 2. 인과 관계 (Cause)
  # -------------------------------------------------------------------------
  Cause:
    description: "A가 B의 원인"
    has_polarity: true
    examples:
      - "인플레이션 우려로 금리 인상"
      - "유동성 공급이 자산 버블 유발"
    patterns:
      - "{head} 때문에 {tail}"
      - "{head}(으)로 인해 {tail}"
    meta:
      lag_days: [0, 30, 60, 90]
      decay_halflife_days: 90
      regime_applicability:
        risk_on: 1.0
        risk_off: 1.0
        inflation_up: 1.0
        disinflation: 1.0
        growth_up: 1.0
        growth_down: 1.0
        liquidity_abundant: 1.0
        liquidity_tight: 1.0

  # -------------------------------------------------------------------------
  # 3. 의존 관계 (DependOn)
  # -------------------------------------------------------------------------
  DependOn:
    description: "A가 B에 의존"
    has_polarity: false
    examples:
      - "성장주 밸류에이션은 금리에 의존"
      - "수출주는 환율에 민감"
    patterns:
      - "{head}은/는 {tail}에 의존"
      - "{head}은/는 {tail}에 민감"
    meta:
      lag_days: [0]
      decay_halflife_days: 180
      regime_applicability:
        risk_on: 1.0
        risk_off: 1.0
        inflation_up: 1.0
        disinflation: 1.0
        growth_up: 1.0
        growth_down: 1.0
        liquidity_abundant: 1.0
        liquidity_tight: 1.0

  # -------------------------------------------------------------------------
  # 4. 시간 순서 - 선행 (TemporalBefore)
  # -------------------------------------------------------------------------
  TemporalBefore:
    description: "A가 B보다 시간적으로 먼저"
    has_polarity: false
    examples:
      - "금리 인상 후 주가 조정"
      - "QE 종료 전 테이퍼링"
    patterns:
      - "{head} 후 {tail}"
      - "{head} 이후 {tail}"
    meta:
      lag_days: [30, 60, 90, 180]
      decay_halflife_days: 120
      regime_applicability:
        risk_on: 1.0
        risk_off: 1.0
        inflation_up: 1.0
        disinflation: 1.0
        growth_up: 1.0
        growth_down: 1.0
        liquidity_abundant: 1.0
        liquidity_tight: 1.0

  # -------------------------------------------------------------------------
  # 5. 시간 순서 - 후행 (TemporalAfter)
  # -------------------------------------------------------------------------
  TemporalAfter:
    description: "A가 B보다 시간적으로 나중"
    has_polarity: false
    examples:
      - "주가 조정 전 금리 인상"
    patterns:
      - "{head} 전 {tail}"
      - "{head} 이전 {tail}"
    meta:
      lag_days: [30, 60, 90, 180]
      decay_halflife_days: 120
      regime_applicability:
        risk_on: 1.0
        risk_off: 1.0
        inflation_up: 1.0
        disinflation: 1.0
        growth_up: 1.0
        growth_down: 1.0
        liquidity_abundant: 1.0
        liquidity_tight: 1.0

  # -------------------------------------------------------------------------
  # 6. 상관 관계 (CorrelateWith)
  # -------------------------------------------------------------------------
  CorrelateWith:
    description: "A와 B가 상관관계"
    has_polarity: true  # 양의 상관/음의 상관
    examples:
      - "금과 달러는 역의 상관관계"
      - "VIX와 주가는 음의 상관"
    patterns:
      - "{head}와/과 {tail}은/는 상관"
      - "{head}와/과 {tail}은/는 역의 관계"
    meta:
      lag_days: [0]
      decay_halflife_days: 30
      regime_applicability:
        risk_on: 1.0
        risk_off: 0.6        # 상관관계가 깨지기 쉬움
        inflation_up: 0.8
        disinflation: 0.8
        growth_up: 1.0
        growth_down: 0.7
        liquidity_abundant: 1.0
        liquidity_tight: 0.6

  # -------------------------------------------------------------------------
  # 7. 구성 관계 (PartOf)
  # -------------------------------------------------------------------------
  PartOf:
    description: "A가 B의 일부"
    has_polarity: false
    examples:
      - "AAPL은 S&P 500의 구성종목"
      - "CPI는 인플레이션 지표의 일부"
    patterns:
      - "{head}은/는 {tail}의 일부"
      - "{head}은/는 {tail}에 포함"
    meta:
      lag_days: [0]
      decay_halflife_days: 365    # 구성 관계는 오래 유지
      regime_applicability:
        risk_on: 1.0
        risk_off: 1.0
        inflation_up: 1.0
        disinflation: 1.0
        growth_up: 1.0
        growth_down: 1.0
        liquidity_abundant: 1.0
        liquidity_tight: 1.0

  # -------------------------------------------------------------------------
  # 8. 조건부 관계 (ConditionalOn)
  # -------------------------------------------------------------------------
  ConditionalOn:
    description: "A가 B 조건 하에서만 성립"
    has_polarity: false
    examples:
      - "유동성이 풍부할 때만 성장주 강세"
    patterns:
      - "{condition} 경우 {head}와 {tail}"
      - "{condition} 때 {head}이/가 {tail}"
    meta:
      lag_days: [0, 30]
      decay_halflife_days: 60
      regime_applicability:
        risk_on: 1.2           # 조건부 관계는 레짐에 따라 강화/약화
        risk_off: 0.5
        inflation_up: 0.8
        disinflation: 1.0
        growth_up: 1.1
        growth_down: 0.6
        liquidity_abundant: 1.2
        liquidity_tight: 0.5

  # -------------------------------------------------------------------------
  # 9. 헤지 관계 (Hedge) - 신규
  # -------------------------------------------------------------------------
  Hedge:
    description: "A가 B의 헤지 수단으로 작용"
    has_polarity: true    # + = 효과적 헤지, - = 역효과
    examples:
      - "금은 인플레이션 헤지"
      - "달러는 위험자산 헤지"
    patterns:
      - "{head}은/는 {tail}의 헤지"
      - "{head}(으)로 {tail} 위험 관리"
    meta:
      lag_days: [0, 30]
      decay_halflife_days: 90
      regime_applicability:
        risk_on: 0.6          # 위험선호 시 헤지 관계 약화
        risk_off: 1.4         # 위험회피 시 헤지 관계 강화
        inflation_up: 1.2
        disinflation: 0.8
        growth_up: 0.7
        growth_down: 1.3
        liquidity_abundant: 0.8
        liquidity_tight: 1.2

  # -------------------------------------------------------------------------
  # 10. 대체 관계 (Substitute) - 신규
  # -------------------------------------------------------------------------
  Substitute:
    description: "A가 B의 대체재로 작용"
    has_polarity: true    # + = 대체 관계, - = 보완 관계
    examples:
      - "채권은 주식의 대체재"
      - "금은 달러의 대안"
    patterns:
      - "{head}은/는 {tail}의 대체재"
      - "{head}(으)로 {tail} 대신"
    meta:
      lag_days: [0]
      decay_halflife_days: 60
      regime_applicability:
        risk_on: 0.8
        risk_off: 1.2
        inflation_up: 1.0
        disinflation: 1.0
        growth_up: 0.9
        growth_down: 1.1
        liquidity_abundant: 1.0
        liquidity_tight: 1.0

  # -------------------------------------------------------------------------
  # 11. 선도 관계 (LeadLag) - 신규
  # -------------------------------------------------------------------------
  LeadLag:
    description: "A가 B를 선도 (시계열 예측력)"
    has_polarity: true
    examples:
      - "구리 가격이 경기를 선도"
      - "장단기 금리차가 경기침체를 선도"
    patterns:
      - "{head}이/가 {tail}을/를 선도"
      - "{head}이/가 {tail}보다 먼저 움직임"
    meta:
      lag_days: [30, 60, 90, 180, 360]
      decay_halflife_days: 180
      regime_applicability:
        risk_on: 1.0
        risk_off: 1.0
        inflation_up: 1.0
        disinflation: 1.0
        growth_up: 1.0
        growth_down: 1.0
        liquidity_abundant: 1.0
        liquidity_tight: 1.0

  # -------------------------------------------------------------------------
  # 12. 정책 영향 (PolicyImpact) - 신규
  # -------------------------------------------------------------------------
  PolicyImpact:
    description: "A(정책)가 B(자산/지표)에 영향"
    has_polarity: true
    examples:
      - "금리 인상 정책이 주택 시장에 부정적"
      - "양적완화가 자산 가격에 긍정적"
    patterns:
      - "{head} 정책이 {tail}에 영향"
      - "{head} 발표로 {tail} 변동"
    meta:
      lag_days: [0, 30, 90, 180]
      decay_halflife_days: 120
      regime_applicability:
        risk_on: 0.8
        risk_off: 1.2
        inflation_up: 1.2
        disinflation: 0.9
        growth_up: 0.9
        growth_down: 1.1
        liquidity_abundant: 0.8
        liquidity_tight: 1.3
